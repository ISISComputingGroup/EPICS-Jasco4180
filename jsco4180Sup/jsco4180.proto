InTerminator = CR LF;
OutTerminator = CR;

input_tolerance = 120; # millisecond wait time between sequenced inputs

readErrorStr {
    in "\%\%%[^%]\%\%";
}

setFlowrate {
    out "%.3f flowrate set";
    wait $input_tolerance;
}

getFlowrate {
    out "a_flow load p";
    in "%f";
    wait $input_tolerance;
}

getPressure {
    out "a_press1 load p";
    in "%d";
    wait $input_tolerance;
}

setPressureMax {
    out "%d pmax set";
    wait $input_tolerance;
}

getPressureMax {
    out "a_pmax load p";
    in "%d";
    wait $input_tolerance;
}

setPressureMin {
    out "%d pmin set";
    wait $input_tolerance;
}

getPressureMin {
    out "a_pmin load p";
    in "%d";
    wait $input_tolerance;
}

setPump {
    out "%d pump set";
    wait $input_tolerance;
}

getTime {
    out "current_time load p";
    in "%d";
    wait $input_tolerance;
}

getCompA {
    out "compa load p";
    in "%f";
    wait $input_tolerance;
}

getCompB {
    out "compb load p";
    in "%f";
    wait $input_tolerance;
}

getCompC {
    out "compc load p";
    in "%f";
    wait $input_tolerance;
}

getCompD {
    out "compd load p";
    in "%f";
    wait $input_tolerance;
}

setComp {
    out "1 pump set";
    wait $input_tolerance;
    out "0 fileno set";
    wait $input_tolerance;
    out "0 openfile";
    wait $input_tolerance;
    out "%(\$1\$2).1f %(\$1\$3).1f %(\$1\$4).1f %(\$1\$5).1f comp set";
    wait $input_tolerance;
    out "closefile";
    wait $input_tolerance;
    out "8 pump set";
    wait $input_tolerance;
}

crash {
    out "1 pump set";
    wait $input_tolerance;
    out "0 fileno set";
    wait $input_tolerance;
    out "0 openfile";
    wait $input_tolerance;
    out "0.0 25 25 25 comp set";
    wait $input_tolerance;
    out "closefile";
    wait $input_tolerance;
    out "8 pump set";
    wait $input_tolerance;
}

getError {
    out "trouble load p";
    in "%d";
    wait $input_tolerance;
}

setError {
    out "0 trouble set";
    wait $input_tolerance;
}

reset {
    out "8 pump set";
    wait $input_tolerance;
    out "1 pump set";
}